<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bullana Bet - Frontend Testing Console</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-item {
            display: flex;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        .test-item:last-child {
            border-bottom: none;
        }
        .test-checkbox {
            margin-right: 15px;
            transform: scale(1.2);
        }
        .test-description {
            flex: 1;
        }
        .test-status {
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            font-weight: bold;
        }
        .status-pass {
            background-color: #d4edda;
            color: #155724;
        }
        .status-fail {
            background-color: #f8d7da;
            color: #721c24;
        }
        .status-pending {
            background-color: #fff3cd;
            color: #856404;
        }
        .api-test-section {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .console-output {
            background: #1e1e1e;
            color: #00ff00;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            white-space: pre-line;
            max-height: 300px;
            overflow-y: auto;
        }
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
        }
        button:hover {
            opacity: 0.9;
        }
        .service-status {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }
        .service {
            flex: 1;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        .service.online {
            background-color: #d4edda;
            color: #155724;
        }
        .service.offline {
            background-color: #f8d7da;
            color: #721c24;
        }
        .service.checking {
            background-color: #fff3cd;
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üöÄ Bullana Bet - Production Testing Console</h1>
        <p>Comprehensive testing suite for Phantom wallet authentication and registration</p>
    </div>

    <div class="service-status">
        <div class="service checking" id="frontend-status">
            <h3>Frontend (React)</h3>
            <p id="frontend-text">Checking...</p>
        </div>
        <div class="service checking" id="backend-status">
            <h3>Backend (Node.js)</h3>
            <p id="backend-text">Checking...</p>
        </div>
        <div class="service checking" id="phantom-status">
            <h3>Phantom Wallet</h3>
            <p id="phantom-text">Checking...</p>
        </div>
    </div>

    <div class="test-section">
        <h2>üéØ Quick Test Actions</h2>
        <button onclick="openRegistration()">Open Registration Page</button>
        <button onclick="openLogin()">Open Login Page</button>
        <button onclick="testPhantomConnection()">Test Phantom Connection</button>
        <button onclick="runApiTests()">Run API Tests</button>
        <button onclick="clearStorage()">Clear Browser Storage</button>
    </div>

    <div class="api-test-section">
        <h2>üîß API Testing Console</h2>
        <button onclick="runApiTests()">Run Automated API Tests</button>
        <div class="console-output" id="api-console">
Click "Run Automated API Tests" to start backend testing...
        </div>
    </div>

    <div class="test-section">
        <h2>üìù Registration Flow Testing</h2>
        <div class="test-item">
            <input type="checkbox" class="test-checkbox" id="test-1">
            <div class="test-description">
                <strong>Basic Registration Form</strong><br>
                Navigate to /register, fill name and email, submit successfully
            </div>
            <div class="test-status status-pending" id="status-1">Pending</div>
        </div>
        <div class="test-item">
            <input type="checkbox" class="test-checkbox" id="test-2">
            <div class="test-description">
                <strong>Phantom Wallet Connection</strong><br>
                Click "Connect Wallet", approve in Phantom, verify address display
            </div>
            <div class="test-status status-pending" id="status-2">Pending</div>
        </div>
        <div class="test-item">
            <input type="checkbox" class="test-checkbox" id="test-3">
            <div class="test-description">
                <strong>Auto-fill Functionality</strong><br>
                Verify name and email auto-fill when wallet connects
            </div>
            <div class="test-status status-pending" id="status-3">Pending</div>
        </div>
        <div class="test-item">
            <input type="checkbox" class="test-checkbox" id="test-4">
            <div class="test-description">
                <strong>Wallet Disconnection</strong><br>
                Click "Disconnect Wallet", verify clean disconnection
            </div>
            <div class="test-status status-pending" id="status-4">Pending</div>
        </div>
        <div class="test-item">
            <input type="checkbox" class="test-checkbox" id="test-5">
            <div class="test-description">
                <strong>Form Validation</strong><br>
                Test empty fields, invalid email, error messages
            </div>
            <div class="test-status status-pending" id="status-5">Pending</div>
        </div>
    </div>

    <div class="test-section">
        <h2>üîê Login Flow Testing</h2>
        <div class="test-item">
            <input type="checkbox" class="test-checkbox" id="test-6">
            <div class="test-description">
                <strong>Email/Password Login</strong><br>
                Login with registered credentials, verify JWT token storage
            </div>
            <div class="test-status status-pending" id="status-6">Pending</div>
        </div>
        <div class="test-item">
            <input type="checkbox" class="test-checkbox" id="test-7">
            <div class="test-description">
                <strong>Wallet Connection on Login</strong><br>
                Connect Phantom wallet from login page
            </div>
            <div class="test-status status-pending" id="status-7">Pending</div>
        </div>
        <div class="test-item">
            <input type="checkbox" class="test-checkbox" id="test-8">
            <div class="test-description">
                <strong>Invalid Login Rejection</strong><br>
                Test wrong email/password, verify error handling
            </div>
            <div class="test-status status-pending" id="status-8">Pending</div>
        </div>
        <div class="test-item">
            <input type="checkbox" class="test-checkbox" id="test-9">
            <div class="test-description">
                <strong>Navigation Flow</strong><br>
                Test transitions between login and register pages
            </div>
            <div class="test-status status-pending" id="status-9">Pending</div>
        </div>
    </div>

    <div class="test-section">
        <h2>üõ°Ô∏è Security Testing</h2>
        <div class="test-item">
            <input type="checkbox" class="test-checkbox" id="test-10">
            <div class="test-description">
                <strong>JWT Token Validation</strong><br>
                Verify token format, expiry, and persistence
            </div>
            <div class="test-status status-pending" id="status-10">Pending</div>
        </div>
        <div class="test-item">
            <input type="checkbox" class="test-checkbox" id="test-11">
            <div class="test-description">
                <strong>Protected Route Access</strong><br>
                Test access control with and without valid tokens
            </div>
            <div class="test-status status-pending" id="status-11">Pending</div>
        </div>
        <div class="test-item">
            <input type="checkbox" class="test-checkbox" id="test-12">
            <div class="test-description">
                <strong>Cross-Origin Requests</strong><br>
                Verify CORS headers and origin validation
            </div>
            <div class="test-status status-pending" id="status-12">Pending</div>
        </div>
    </div>

    <div class="test-section">
        <h2>üì± User Experience Testing</h2>
        <div class="test-item">
            <input type="checkbox" class="test-checkbox" id="test-13">
            <div class="test-description">
                <strong>Mobile Responsiveness</strong><br>
                Test on mobile devices or browser mobile mode
            </div>
            <div class="test-status status-pending" id="status-13">Pending</div>
        </div>
        <div class="test-item">
            <input type="checkbox" class="test-checkbox" id="test-14">
            <div class="test-description">
                <strong>Error Message Clarity</strong><br>
                Verify user-friendly error messages throughout
            </div>
            <div class="test-status status-pending" id="status-14">Pending</div>
        </div>
        <div class="test-item">
            <input type="checkbox" class="test-checkbox" id="test-15">
            <div class="test-description">
                <strong>Loading States</strong><br>
                Verify loading indicators during async operations
            </div>
            <div class="test-status status-pending" id="status-15">Pending</div>
        </div>
    </div>

    <script>
        // Check service status
        async function checkServiceStatus() {
            // Check Frontend
            try {
                const frontendResponse = await fetch('http://localhost:3000');
                if (frontendResponse.ok || frontendResponse.status === 200) {
                    updateServiceStatus('frontend', 'online', 'http://localhost:3000');
                } else {
                    updateServiceStatus('frontend', 'offline', 'Not responding');
                }
            } catch (error) {
                updateServiceStatus('frontend', 'offline', 'Not responding');
            }

            // Check Backend
            try {
                const backendResponse = await fetch('http://localhost:13578/apiRoute/getResponse');
                if (backendResponse.ok) {
                    updateServiceStatus('backend', 'online', 'http://localhost:13578');
                } else {
                    updateServiceStatus('backend', 'offline', 'Not responding');
                }
            } catch (error) {
                updateServiceStatus('backend', 'offline', 'Not responding');
            }

            // Check Phantom Wallet
            if (window.solana && window.solana.isPhantom) {
                updateServiceStatus('phantom', 'online', 'Extension detected');
            } else {
                updateServiceStatus('phantom', 'offline', 'Extension not found');
            }
        }

        function updateServiceStatus(service, status, text) {
            const statusElement = document.getElementById(`${service}-status`);
            const textElement = document.getElementById(`${service}-text`);
            
            statusElement.className = `service ${status}`;
            textElement.textContent = text;
        }

        // Test action functions
        function openRegistration() {
            window.open('http://localhost:3000/register', '_blank');
        }

        function openLogin() {
            window.open('http://localhost:3000/login', '_blank');
        }

        async function testPhantomConnection() {
            if (window.solana && window.solana.isPhantom) {
                try {
                    const response = await window.solana.connect();
                    alert(`Phantom Connected! Address: ${response.publicKey.toString()}`);
                } catch (error) {
                    alert(`Phantom Connection Failed: ${error.message}`);
                }
            } else {
                alert('Phantom Wallet not detected. Please install the extension.');
            }
        }

        async function runApiTests() {
            const consoleElement = document.getElementById('api-console');
            consoleElement.textContent = 'Starting API tests...\n';

            const tests = [
                { name: 'Backend Health Check', endpoint: '/apiRoute/getResponse' },
                { name: 'Registration Test', endpoint: '/basic/signup', method: 'POST' },
                { name: 'Login Test', endpoint: '/basic/login', method: 'POST' },
            ];

            for (const test of tests) {
                consoleElement.textContent += `\nüß™ Running: ${test.name}\n`;
                
                try {
                    const options = {
                        method: test.method || 'GET',
                        headers: { 'Content-Type': 'application/json' }
                    };

                    if (test.method === 'POST') {
                        const timestamp = Date.now();
                        options.body = JSON.stringify({
                            username: `testuser_${timestamp}`,
                            email: `test_${timestamp}@bullana.local`,
                            password: 'TestPassword123!',
                            refer: ''
                        });
                    }

                    const response = await fetch(`http://localhost:13578${test.endpoint}`, options);
                    const data = await response.json();
                    
                    if (response.ok) {
                        consoleElement.textContent += `‚úÖ ${test.name}: PASS\n`;
                        consoleElement.textContent += `   Response: ${JSON.stringify(data).substring(0, 100)}...\n`;
                    } else {
                        consoleElement.textContent += `‚ùå ${test.name}: FAIL (${response.status})\n`;
                    }
                } catch (error) {
                    consoleElement.textContent += `‚ùå ${test.name}: ERROR - ${error.message}\n`;
                }
            }

            consoleElement.textContent += '\n‚úÖ API testing complete!\n';
            consoleElement.scrollTop = consoleElement.scrollHeight;
        }

        function clearStorage() {
            localStorage.clear();
            sessionStorage.clear();
            alert('Browser storage cleared! You may need to refresh the frontend.');
        }

        // Add event listeners for checkboxes
        document.addEventListener('DOMContentLoaded', function() {
            for (let i = 1; i <= 15; i++) {
                const checkbox = document.getElementById(`test-${i}`);
                const status = document.getElementById(`status-${i}`);
                
                checkbox.addEventListener('change', function() {
                    if (this.checked) {
                        status.textContent = 'Pass';
                        status.className = 'test-status status-pass';
                    } else {
                        status.textContent = 'Pending';
                        status.className = 'test-status status-pending';
                    }
                });
            }

            // Check service status on load
            checkServiceStatus();
        });
    </script>
</body>
</html>
